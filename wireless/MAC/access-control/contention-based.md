# 竞争接入 (Contention-Based Access)

## 概述
竞争接入是一种分布式的媒体访问控制方法，多个节点竞争共享信道的使用权。

## CSMA (Carrier Sense Multiple Access) - 载波监听多路访问
### 基本原理
- **载波监听**: 发送前监听信道是否空闲
- **多路访问**: 多个站点共享同一信道
- **冲突检测**: 检测是否发生冲突

### 工作流程
1. **监听信道**: 检测信道是否空闲
2. **判断发送**: 如果空闲则发送数据
3. **冲突处理**: 如果冲突则执行退避算法
4. **重传机制**: 失败后重新尝试

### 性能特点
- **吞吐量**: 随负载增加先增后减
- **延迟**: 轻负载时延迟较小
- **公平性**: 各站点机会基本相等

## CSMA/CD (Collision Detection) - 冲突检测
### 基本原理
- **边发送边监听**: 发送过程中持续监听
- **冲突检测**: 检测到冲突立即停止发送
- **干扰信号**: 发送干扰信号通知其他站点

### 工作机制
1. **载波监听**: 发送前监听信道
2. **开始发送**: 信道空闲时开始发送
3. **冲突检测**: 发送过程中检测冲突
4. **停止发送**: 检测到冲突立即停止
5. **发送干扰**: 发送干扰信号
6. **随机退避**: 执行二进制指数退避

### 适用场景
- **有线网络**: 主要用于有线局域网
- **全双工**: 需要同时收发能力
- **冲突域**: 所有站点在同一冲突域

## CSMA/CA (Collision Avoidance) - 冲突避免
### 基本原理
- **预防冲突**: 通过机制避免冲突发生
- **RTS/CTS**: 请求发送/允许发送握手
- **随机退避**: 减少冲突概率

### 工作机制
#### 基本DCF (Distributed Coordination Function)
1. **信道监听**: 监听信道DIFS时间
2. **随机退避**: 如果信道忙则随机退避
3. **发送数据**: 退避结束后发送数据
4. **等待ACK**: 等待接收方确认

#### RTS/CTS机制
1. **发送RTS**: 发送请求发送帧
2. **回复CTS**: 接收方回复允许发送
3. **发送数据**: 发送数据帧
4. **发送ACK**: 接收方发送确认

### 参数设置
- **DIFS**: 分布式协调功能帧间间隔
- **SIFS**: 短帧间间隔
- **退避窗口**: 竞争窗口大小
- **重传限制**: 最大重传次数

## 二进制指数退避算法
### 基本原理
- **退避时间**: 随机选择退避时间
- **窗口大小**: 冲突后窗口大小加倍
- **指数增长**: 退避窗口指数增长

### 算法步骤
1. **初始化**: 设置初始退避窗口
2. **随机选择**: 从窗口中随机选择退避时间
3. **倒计时**: 当信道空闲时倒计时
4. **发送数据**: 倒计时到零时发送
5. **处理冲突**: 冲突时加倍窗口大小
6. **成功重置**: 成功发送后重置窗口

### 参数影响
- **初始窗口**: 影响轻负载性能
- **最大窗口**: 影响重负载性能
- **退避因子**: 影响收敛速度

## 隐藏终端和暴露终端问题
### 隐藏终端问题
- **问题描述**: A和C都能听到B，但A和C互相听不到
- **后果**: A和C同时向B发送造成冲突
- **解决方案**: 
  - RTS/CTS机制
  - 功率控制
  - 中继转发

### 暴露终端问题
- **问题描述**: B向A发送时，C认为信道忙不能向D发送
- **后果**: 不必要的传输阻塞，降低系统容量
- **解决方案**: 
  - 智能载波监听
  - 空间复用
  - 定向天线

### RTS/CTS解决方案
- **RTS广播**: 发送方广播RTS帧
- **CTS响应**: 接收方回复CTS帧
- **虚拟载波监听**: 根据RTS/CTS设置NAV
- **保护区域**: 在发送期间保护通信对

## 性能分析
### 吞吐量分析
- **理论最大值**: 取决于协议开销
- **实际吞吐量**: 受冲突和退避影响
- **负载特性**: 轻负载时效率高，重负载时下降

### 延迟分析
- **接入延迟**: 获得信道访问权的时间
- **退避延迟**: 退避算法引入的延迟
- **冲突延迟**: 冲突检测和重传的延迟

### 公平性分析
- **短期公平性**: 短时间内的公平性
- **长期公平性**: 长时间内的公平性
- **影响因素**: 退避算法、信道条件等

## 改进技术
### 自适应退避
- **动态调整**: 根据网络状况调整退避参数
- **负载估计**: 估计当前网络负载
- **参数优化**: 优化退避窗口大小

### 多信道CSMA
- **信道分配**: 将多个信道分配给不同用户
- **协调机制**: 协调多信道的使用
- **切换策略**: 在信道间切换的策略

### 智能载波监听
- **能量检测**: 基于能量的载波监听
- **特征检测**: 基于信号特征的监听
- **学习算法**: 利用机器学习优化

## 应用实例
### IEEE 802.11 Wi-Fi
- **DCF**: 基本的竞争接入机制
- **PCF**: 可选的轮询机制
- **EDCA**: 增强的分布式信道接入

### IEEE 802.15.4 ZigBee
- **CSMA/CA**: 基本的接入机制
- **GTS**: 保证时隙机制
- **信标模式**: 支持信标的工作模式

### IEEE 802.15.1 Bluetooth
- **跳频**: 结合频率跳变的CSMA
- **时隙结构**: 基于时隙的访问控制
- **主从结构**: 主设备控制访问 